# Веб-приложение для управления информацией об автомобилях

Это веб-приложение, созданное с использованием Python и Django, предназначено для управления информацией об автомобилях. Приложение позволяет пользователям просматривать, добавлять, редактировать и удалять записи об автомобилях, а также оставлять комментарии к ним.

## Содержание

- [Функции](#функции)
- [Стек](#стек)
- [Модели](#модели)
- [Установка](#установка)
- [Использование](#использование)
- [API](#api)

## Функции

1. **Управление автомобилями**
   - Просмотр списка автомобилей.
   - Просмотр информации о каждом автомобиле.
   - Добавление новых автомобилей (доступно только зарегистрированным пользователям).
   - Редактирование и удаление только своих записей об автомобилях.

2. **Комментарии**
   - Зарегистрированные пользователи могут оставлять комментарии к автомобилю.
   - Комментарии отображаются под соответствующим автомобилем.

3. **API**
   - Реализован REST API для управления автомобилями и комментариями.

4. **Регистрация и авторизация**
   - Реализованы регистрация и авторизация пользователей.

5. **Административная панель**
   - Модели автомобилей и комментариев доступны в административной панели Django.

## Стек

- Python
- Django
- Django REST Framework
- DRF-simplejwt
- PostgreSQL

## Модели

### Car

- **make**: марка автомобиля (например, "Toyota", "Ford")
- **model**: модель автомобиля (например, "Camry", "Mustang")
- **year**: год выпуска (например, 2020, 2021)
- **description**: описание автомобиля
- **created_at**: дата и время создания записи
- **updated_at**: дата и время последнего обновления записи
- **owner**: внешний ключ на пользователя, который создал запись

### Comment

- **content**: содержание комментария
- **created_at**: дата и время создания комментария
- **car**: внешний ключ на автомобиль
- **author**: внешний ключ на пользователя

## Установка

1. Клонируйте репозиторий:

   ```bash
   git clone <url-репозитория>
   cd <папка-проекта>
   ```

2. Установите Docker и Docker-compose с [оффициального сайта](https://docs.docker.com/engine/install/).

3. Создайте и заполните файл *.env* по шаблону *.env.template*

4. Соберите образы:

   ```bash
   docker compose build
   ```

5. Запустите контейнеры:

   ```bash
   docker compose up -d
   ```

6. Созадайте суперпользователя:

   - Входим в контейнер `docker exec -it <название приложения> bash`
   - Создаем пользователя `python manage.py createsuperuser`

## Использование

Теперь вы можете открыть приложение в браузере по адресу [http://127.0.0.1:80/](http://127.0.0.1:80/cars/).

## API

API использует авторизацию с помощью токена, который выдается после регистрации или логина. Данный токен необходимо передавать в headers в формате: `Authorization: Bearer <ваш токен>`

### Конечные точки API

- **POST** `/api/register/` — регистрация нового пользователя.

   request:

   ```json
   {
      "username": "username",
      "password": "123456qwerty"
   }
   ```

   response:

   ```json
   {
      "username": "username",
      "token": "token"
   }
   ```

- **POST** `/api/login/` — вход существующего пользователя.

   request:

   ```json
   {
      "username": "username",
      "password": "123456qwerty"
   }
   ```

   response:

   ```json
   {
      "username": "username",
      "token": "token"
   }
   ```

- **GET** `/api/cars/` — получение списка автомобилей.
- **GET** `/api/cars/<id>/` — получение информации о конкретном автомобиле.
- **POST** `/api/cars/` — создание нового автомобиля (необходима авторизация).

   request:

   ```json
   {
      "make":"Chery",
      "model":"Tigua",
      "year":2024,
      "description":"Not the best car"
   }
   ```

   response:

   ```json
   {
      "id": 2,
      "make": "Chery",
      "model": "Tigua",
      "year": 2024,
      "description": "Not the best car",
      "created_at": "2024-12-10T04:22:12.605737Z",
      "updated_at": "2024-12-10T04:22:12.605772Z",
      "owner": "themswesson"
   }
   ```

- **PUT** `/api/cars/<id>/` — обновление информации о автомобиле (необходима авторизация).

   request:

   ```json
   {
      "make":"Chery2",
      "model":"Tigua2",
      "year":2023,
      "description":"The best car"
   }
   ```

   response:

   ```json
   {
      "id": 2,
      "make": "Chery2",
      "model": "Tigua2",
      "year": 2023,
      "description": "The best car",
      "created_at": "2024-12-10T04:22:12.605737Z",
      "updated_at": "2024-12-10T04:22:12.605772Z",
      "owner": "themswesson"
   }
   ```

- **DELETE** `/api/cars/<id>/` — удаление автомобиля (необходима авторизация).
- **GET** `/api/cars/<id>/comments/` — получение комментариев к автомобилю.
- **POST** `/api/cars/<id>/comments/` — добавление нового комментария к автомобилю (необходима авторизация).

   request:

   ```json
   {
      "content":"ggwp"
   }
   ```

   response:

   ```json
   {
      "id": 2,
      "content": "ggwp",
      "created_at": "2024-12-10T05:21:24.275109Z",
      "car": 2,
      "author": 1
   }
   ```
